---
- collections:
    - ansible.builtin
  block:
    - name: Test ssh connection on configured port
      wait_for_connection:
        timeout: 10
      register: state_gathering_connection_test_result

    # Add checks, after instaling the OS the Btrfs subvolume for containers should still be missing

    - name: Setting state variable
      set_fact:
        setup_completed: "{{ state_gathering_connection_test_result is succeeded }}"
  ignore_errors: True
