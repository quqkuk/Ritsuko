{"ignition":{"version":"3.3.0"},"storage":{"disks":[{"device":"{{ ('/dev/', hetzner_install_installation_drive) | path_join }}","partitions":[{"number":{{ hetzner_install_config_partition }},"shouldExist":false,"wipePartitionEntry":true},{"number":{{ hetzner_install_spare_partition }},"resize":true,"sizeMiB":{{ (swap_partition_details['start'] | int - spare_partition_details['start'] | int)*(swap_partition_details['sectorsize'] | int)/(1024**2) }}},{"number":{{ hetzner_install_swap_partition }},"resize":true,"sizeMiB":0}]}],"files":[{"overwrite":true,"path":"/etc/ssh/sshd_config.d/90-change-port.conf","contents":{"compression":"","source":"data:,%23%20Changing%20the%20ssh%20port%0APort%20{{ hetzner_install_ansible_port }}%0A"}},{"overwrite":true,"path":"/etc/ssh/sshd_config.d/40-prohibit-root-login.conf","contents":{"compression":"","source":"data:,%23%20Prohibiting%20login%20as%20root%0APermitRootLogin%20no%0A"}},{"overwrite":true,"path":"/etc/ssh/sshd_config.d/40-allow-tcp-forwarding.conf","contents":{"compression":"gzip","source":"data:;base64,H4sIAAAAAAAC/1SLvarCQBBG+32KgXQpQnKbC9uJP5VgkHRisVlHXZzMLLsDIW8vStBYfuc7p4AVkYzQrVuIkhSukkaXLoFv5v10Pu4+CCbMpoBNyK6n1z7iIIrLqMU0BN2HrMjAwmgK2PKsfz0QpglUgERi7/xjDg8RGUi8o7tkteUSN3//VV3VVfOLT9Y2Z1uaZwAAAP//0e1PJcsAAAA="}},{"overwrite":true,"path":"/etc/ssh/sshd_config.d/40-disable-password-authentication.conf","contents":{"compression":"","source":"data:,%23%20Disable%20Password%20and%20Challenge%20Authentication%0APasswordAuthentication%20no%0AChallengeResponseAuthentication%20no%0A"}},{"overwrite":true,"path":"/etc/sudoers.d/90-permit-user-nopasswd","contents":{"compression":"","source":"data:,%23%20Permit%20passwordless%20sudo%20to%20{{ hetzner_install_ansible_user }}%0A{{ hetzner_install_ansible_user }}%20ALL%3D(ALL%3AALL)%20NOPASSWD%3A%20ALL%0A"}},{"path":"/etc/logrotate.conf","append":[{"compression":"","source":"data:,weekly%0Arotate%200%0A"}]}]},"systemd":{"units":[{"enabled":true,"name":"docker.service"},{"enabled":true,"name":"sshd.service"}]}}
